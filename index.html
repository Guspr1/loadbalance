<!DOCTYPE html><html lang="id"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Mikrotik PCC ULTIMATE</title><style>body{font-family:'Segoe UI',sans-serif;background:#121212;color:#e0e0e0;padding:20px;margin:0}a{text-decoration:none}.container{max-width:1000px;margin:0 auto;background:#1e1e1e;border-radius:8px;box-shadow:0 8px 30px rgba(0,0,0,0.5);border:1px solid #333}.header{padding:25px;text-align:center;background:#252526;border-bottom:1px solid #333}h2{margin:0 0 5px;color:#00bd7e;letter-spacing:1px}.credit{color:#888;font-size:14px;font-weight:500}.tabs{display:flex;background:#2d2d30;border-bottom:1px solid #444}.tab-btn{flex:1;padding:15px;background:0 0;border:0;color:#aaa;cursor:pointer;font-weight:700;transition:.3s}.tab-btn:hover{background:#3e3e42;color:#fff}.tab-btn.active{background:#1e1e1e;color:#00bd7e;border-top:3px solid #00bd7e}.tab-content{display:none;padding:30px}.tab-content.active{display:block;animation:fadeIn .4s}.list-row{display:flex;gap:15px;background:#2b2b2b;padding:15px;border-radius:6px;border:1px solid #3e3e42;align-items:flex-end;margin-bottom:10px}.input-group{flex:1}label{display:block;margin-bottom:6px;font-size:.85em;color:#9cdcfe}input{width:100%;padding:10px;background:#333;border:1px solid #555;color:#fff;border-radius:4px;box-sizing:border-box}input:focus{border-color:#00bd7e;outline:0}.btn{padding:10px 15px;border:0;border-radius:4px;cursor:pointer;font-weight:700;color:#fff}.btn-add{background:#00bd7e;color:#121212;width:100%}.btn-del{background:#d32f2f;width:40px;height:40px}.btn-gen{background:#2196f3;width:100%;padding:15px;font-size:1.1em;margin-top:20px}.btn-copy{background:#4caf50;width:100%;margin-top:10px}textarea{width:100%;height:450px;background:#0d0d0d;color:#a9b7c6;border:1px solid #333;padding:15px;font-family:'Consolas',monospace;margin-top:15px;white-space:pre;border-radius:5px;font-size:13px}@keyframes fadeIn{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}.footer{text-align:center;padding:20px;border-top:1px solid #333;background:#252526}.donate-btn{background:#faae2b;color:#1e1e1e;padding:10px 20px;border-radius:5px;font-weight:bold;display:inline-flex;align-items:center;gap:8px;transition:.2s}.donate-btn:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(250,174,43,.4)}</style></head><body>
<div class="container">
<div class="header"><h2>MIKROTIK PCC ULTIMATE V3</h2><div class="credit">Created By Muhammad Bagus Pribadi</div></div>
<div class="tabs"><button class="tab-btn active" onclick="_t('t1',this)">1. ISP (WAN)</button><button class="tab-btn" onclick="_t('t2',this)">2. LAN (VLAN)</button><button class="tab-btn" onclick="_t('t3',this)">3. GET SCRIPT</button></div>
<div id="t1" class="tab-content active"><h3 style="color:#00bd7e;border-bottom:1px solid #444;padding-bottom:10px">ISP / WAN Configuration</h3><div id="c1">
<div class="list-row"><div class="input-group"><label>Interface Name</label><input type="text" class="i-if" value="ether1-ISP-A"></div><div class="input-group"><label>IP Address</label><input type="text" class="i-ip" value="192.168.100.2/24"></div><div class="input-group"><label>Gateway</label><input type="text" class="i-gw" value="192.168.100.1"></div><div class="input-group" style="flex:.5"><label>Mb</label><input type="number" class="i-bw" value="20"></div><button class="btn btn-del" onclick="_d(this)">X</button></div>
<div class="list-row"><div class="input-group"><label>Interface Name</label><input type="text" class="i-if" value="ether2-ISP-B"></div><div class="input-group"><label>IP Address</label><input type="text" class="i-ip" value="192.168.200.2/24"></div><div class="input-group"><label>Gateway</label><input type="text" class="i-gw" value="192.168.200.1"></div><div class="input-group" style="flex:.5"><label>Mb</label><input type="number" class="i-bw" value="30"></div><button class="btn btn-del" onclick="_d(this)">X</button></div>
</div><button class="btn btn-add" onclick="_a1()">+ TAMBAH ISP</button></div>
<div id="t2" class="tab-content"><h3 style="color:#00bd7e;border-bottom:1px solid #444;padding-bottom:10px">LAN / Local Network</h3><div id="c2">
<div class="list-row"><div class="input-group"><label>Interface Name</label><input type="text" class="l-if" value="ether3-LAN"></div><div class="input-group"><label>IP Gateway</label><input type="text" class="l-ip" value="192.168.2.1/24"></div><button class="btn btn-del" onclick="_d(this)">X</button></div>
</div><button class="btn btn-add" onclick="_a2()">+ TAMBAH NETWORK LOKAL</button></div>
<div id="t3" class="tab-content"><h3 style="color:#00bd7e;border-bottom:1px solid #444;padding-bottom:10px">Generated Script</h3><div id="inf" style="color:#aaa;margin-bottom:10px;font-weight:500"></div><button class="btn btn-gen" onclick="_g()">GENERATE ULTIMATE SCRIPT</button><textarea id="out" readonly placeholder="Script anti-blackhole akan muncul di sini..."></textarea><button class="btn btn-copy" onclick="_c()">COPY TO CLIPBOARD</button></div>
<div class="footer"><p style="color:#666;font-size:12px;margin-bottom:10px">Support Developer:</p><a href="https://saweria.co/SigmaRule" target="_blank" class="donate-btn">üéÅ Saweria (SigmaRule)</a></div>
</div><script>
const D=document;function _t(i,e){D.querySelectorAll('.tab-content').forEach(x=>x.classList.remove('active'));D.querySelectorAll('.tab-btn').forEach(x=>x.classList.remove('active'));D.getElementById(i).classList.add('active');e.classList.add('active')}
function _d(b){if(confirm("Hapus baris?"))b.parentElement.remove()}
function _a1(){let d=D.createElement('div');d.className='list-row';d.innerHTML=`<div class="input-group"><label>Interface</label><input type="text" class="i-if"></div><div class="input-group"><label>IP</label><input type="text" class="i-ip"></div><div class="input-group"><label>Gateway</label><input type="text" class="i-gw"></div><div class="input-group" style="flex:.5"><label>Mb</label><input type="number" class="i-bw" value="10"></div><button class="btn btn-del" onclick="_d(this)">X</button>`;D.getElementById('c1').appendChild(d)}
function _a2(){let d=D.createElement('div');d.className='list-row';d.innerHTML=`<div class="input-group"><label>Interface</label><input type="text" class="l-if"></div><div class="input-group"><label>IP</label><input type="text" class="l-ip"></div><button class="btn btn-del" onclick="_d(this)">X</button>`;D.getElementById('c2').appendChild(d)}
function _gcd(a,b){return b==0?a:_gcd(b,a%b)}
function _g(){let s=`# GENERATED BY MUHAMMAD BAGUS PRIBADI\n# ULTIMATE PCC V3 (Failover+LeakProof)\n\n`,I=[],L=[],q=D.querySelectorAll;q.call(D,'#c1 .list-row').forEach((r,x)=>{I.push({n:`ISP-${x+1}`,f:r.querySelector('.i-if').value.trim(),i:r.querySelector('.i-ip').value.trim(),g:r.querySelector('.i-gw').value.trim(),b:parseInt(r.querySelector('.i-bw').value)||1})});q.call(D,'#c2 .list-row').forEach(r=>{L.push({f:r.querySelector('.l-if').value.trim(),i:r.querySelector('.l-ip').value.trim()})});if(I.length==0||L.length==0){alert("Data belum lengkap!");return}
s+=`/log info "Applying Ultimate PCC Logic by Bagus Pribadi..."\n\n`;s+=`# [1] PREPARATION (Interfaces & IPs)\n/interface list add name=WAN_LIST\n/interface list add name=LAN_LIST\n`;I.forEach(x=>{s+=`/interface set [find default-name=${x.f}] name="${x.f}"\n/interface list member add interface="${x.f}" list=WAN_LIST\n/ip address add address=${x.i} interface="${x.f}" comment="${x.n}"\n`});L.forEach(x=>{if(!x.f.toLowerCase().includes('vlan'))s+=`/interface set [find default-name=${x.f}] name="${x.f}"\n`;s+=`/interface list member add interface="${x.f}" list=LAN_LIST\n/ip address add address=${x.i} interface="${x.f}" comment="Local"\n`});
s+=`\n# [2] SECURITY & LOCAL BYPASS (Leak Proof)\n/ip dns set servers=8.8.8.8,1.1.1.1 allow-remote-requests=yes\n/ip firewall nat add chain=srcnat out-interface-list=WAN_LIST action=masquerade\n`;s+=`/ip firewall address-list\nadd list=LOCAL_NET address=192.168.0.0/16\nadd list=LOCAL_NET address=10.0.0.0/8\nadd list=LOCAL_NET address=172.16.0.0/12\n`;
let B=I.map(x=>x.b),G=B[0];for(let i=1;i<B.length;i++)G=_gcd(B[i],G);let T=0;I.forEach(x=>{x.w=x.b/G;T+=x.w});D.getElementById('inf').innerText=`Analysis: ${I.length} WANs, Total ${T} PCC Streams.`;
s+=`\n# [3] MANGLE RULES (Optimized)\n/ip firewall mangle\n`;s+=`# 3A. Accept Local Traffic (Jangan di-loadbalance)\nadd chain=prerouting dst-address-list=LOCAL_NET action=accept comment="Bypass Local Traffic"\n`;s+=`# 3B. Input Connection (Agar Router bisa diremote dari luar)\n`;I.forEach(x=>{s+=`add chain=prerouting in-interface="${x.f}" connection-state=new action=mark-connection new-connection-mark=${x.n}_conn passthrough=yes\n`});s+=`# 3C. PCC Classification\n`;let c=0;I.forEach(x=>{for(let k=0;k<x.w;k++){s+=`add chain=prerouting in-interface-list=LAN_LIST dst-address-list=!LOCAL_NET per-connection-classifier=both-addresses-and-ports:${T}/${c} connection-mark=no-mark action=mark-connection new-connection-mark=${x.n}_conn passthrough=yes\n`;c++}});s+=`# 3D. Mark Routing\n`;I.forEach(x=>{s+=`add chain=prerouting in-interface-list=LAN_LIST connection-mark=${x.n}_conn action=mark-routing new-routing-mark=to_${x.n} passthrough=no\nadd chain=output connection-mark=${x.n}_conn action=mark-routing new-routing-mark=to_${x.n} passthrough=no\n`});
s+=`\n# [4] ROUTING & ADVANCED FAILOVER (Anti-Blackhole)\n/ip route\n`;I.forEach(x=>{s+=`# Main Route for ${x.n}\nadd dst-address=0.0.0.0/0 gateway=${x.g} distance=1 routing-mark=to_${x.n} check-gateway=ping\n`;s+=`# Backup Routes for ${x.n} (Cross-Failover)\n`;I.forEach(b=>{if(x.n!==b.n){s+=`add dst-address=0.0.0.0/0 gateway=${b.g} distance=2 routing-mark=to_${x.n} check-gateway=ping comment="Backup via ${b.n}"\n`}})});s+=`\n# [5] DEFAULT ROUTES (Untuk Router Update/Traffic tanpa mark)\n`;I.sort((a,b)=>b.b-a.b).forEach((x,i)=>{s+=`add dst-address=0.0.0.0/0 gateway=${x.g} distance=${i+1} check-gateway=ping\n`});D.getElementById('out').value=s}
function _c(){let e=D.getElementById("out");e.select();navigator.clipboard.writeText(e.value);alert("Script berhasil dicopy! Siap deploy.")}
</script></body></html>
