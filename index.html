<!DOCTYPE html><html lang="id"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Mikrotik PCC (ROS 6 dan ROS 7)</title><style>body{font-family:sans-serif;background:#050505;color:#ccc;margin:0;padding:20px}*{box-sizing:border-box}.c{max-width:900px;margin:0 auto;background:#111;border:1px solid #333;border-radius:8px;box-shadow:0 20px 50px rgba(0,0,0,.8)}.h{padding:25px;text-align:center;background:linear-gradient(180deg,#1a1a1a 0,#111 100%);border-bottom:1px solid #333}h2{margin:0;color:#fff;font-size:22px}.sub{color:#00e676;font-size:11px;font-weight:700;letter-spacing:2px;margin-top:5px}.cr{color:#555;font-size:12px;margin-top:5px}.t{display:flex;background:#222;border-bottom:1px solid #333}.tb{flex:1;padding:15px;cursor:pointer;background:0 0;border:0;color:#777;font-weight:700;transition:.2s}.tb:hover{color:#fff}.tb.a{color:#00e676;border-bottom:3px solid #00e676;background:#151515}.p{padding:25px;display:none}.p.a{display:block}.r{display:flex;gap:10px;margin-bottom:10px;background:#1a1a1a;padding:15px;border:1px solid #333;border-radius:4px;align-items:flex-end}.g{flex:1}label{display:block;font-size:10px;color:#888;margin-bottom:4px;font-weight:700}input{width:100%;background:#0a0a0a;border:1px solid #333;color:#fff;padding:8px;border-radius:3px}input:focus{border-color:#00e676;outline:0}.btn{padding:10px;border:0;border-radius:3px;cursor:pointer;font-weight:700;color:#fff}.ba{width:100%;background:#00e676;color:#000}.bd{background:#d32f2f;width:35px}.bg{width:100%;background:#2962ff;margin-top:10px;padding:15px}.bc{width:100%;background:#2e7d32;margin-top:10px}.rg{display:flex;gap:20px;margin-bottom:20px;background:#1a1a1a;padding:15px;border:1px solid #333;border-radius:4px;color:#ccc;font-weight:700;font-size:13px}.ro{display:flex;align-items:center;gap:8px;cursor:pointer}textarea{width:100%;height:400px;background:#080808;color:#a9b7c6;border:1px solid #333;padding:15px;margin-top:15px;border-radius:4px;resize:vertical;font-family:monospace;font-size:11px}.f{padding:20px;text-align:center;border-top:1px solid #333;background:#151515;font-size:13px}.don{display:inline-block;background:#ffb300;color:#000;padding:8px 20px;border-radius:50px;font-weight:700;text-decoration:none;margin-top:10px}</style></head><body><div class="c"><div class="h"><h2>MIKROTIK PCC GENERATOR</h2><div class="sub">V4.2 UNIVERSAL (PROTECTED)</div><div class="cr">Created by Muhammad Bagus Pribadi</div></div><div class="t"><button class="tb a" onclick="_x('p1',this)">1. WAN</button><button class="tb" onclick="_x('p2',this)">2. LAN</button><button class="tb" onclick="_x('p3',this)">3. SCRIPT</button></div><div id="p1" class="p a"><div class="rg"><div style="color:#00e676">TARGET OS:</div><label class="ro"><input type="radio" name="ros" value="v6" checked> v6 (Legacy)</label><label class="ro"><input type="radio" name="ros" value="v7"> v7 (Modern)</label></div><div id="lw"><div class="r"><div class="g"><label>Interface</label><input type="text" class="if" value="ether1-ISP-A"></div><div class="g"><label>IP</label><input type="text" class="ip" value="192.168.100.2/24"></div><div class="g"><label>Gateway</label><input type="text" class="gw" value="192.168.100.1"></div><div class="g" style="flex:.4"><label>Mb</label><input type="number" class="bw" value="20"></div><button class="btn bd" onclick="_z(this)">√ó</button></div><div class="r"><div class="g"><label>Interface</label><input type="text" class="if" value="ether2-ISP-B"></div><div class="g"><label>IP</label><input type="text" class="ip" value="192.168.200.2/24"></div><div class="g"><label>Gateway</label><input type="text" class="gw" value="192.168.200.1"></div><div class="g" style="flex:.4"><label>Mb</label><input type="number" class="bw" value="30"></div><button class="btn bd" onclick="_z(this)">√ó</button></div></div><button class="btn ba" onclick="_aw()">+ ADD WAN</button></div><div id="p2" class="p"><div id="ll"><div class="r"><div class="g"><label>Interface</label><input type="text" class="lif" value="ether3-LAN"></div><div class="g"><label>IP Gateway</label><input type="text" class="lip" value="192.168.2.1/24"></div><button class="btn bd" onclick="_z(this)">√ó</button></div></div><button class="btn ba" onclick="_al()">+ ADD LAN</button></div><div id="p3" class="p"><div id="st" style="color:#2962ff;font-weight:700;margin-bottom:10px;font-family:monospace"></div><button class="btn bg" onclick="_gn()">GENERATE SCRIPT</button><textarea id="ou" readonly></textarea><button class="btn bc" onclick="_cp()">COPY SCRIPT</button></div><div class="f">Support Dev:<br><a href="https://saweria.co/SigmaRule" target="_blank" class="don">üéÅ Saweria (SigmaRule)</a></div></div><script>
const _d=document,_q=(s)=>_d.querySelectorAll(s),_i=(s)=>_d.getElementById(s);
function _x(i,e){_q('.p').forEach(x=>x.classList.remove('a'));_q('.tb').forEach(x=>x.classList.remove('a'));_i(i).classList.add('a');e.classList.add('a')}
function _z(e){confirm("Hapus?")&&e.parentElement.remove()}
function _aw(){let d=_d.createElement('div');d.className='r';d.innerHTML=`<div class="g"><label>Interface</label><input type="text" class="if"></div><div class="g"><label>IP</label><input type="text" class="ip"></div><div class="g"><label>GW</label><input type="text" class="gw"></div><div class="g" style="flex:.4"><label>Mb</label><input type="number" class="bw" value="10"></div><button class="btn bd" onclick="_z(this)">√ó</button>`;_i('lw').appendChild(d)}
function _al(){let d=_d.createElement('div');d.className='r';d.innerHTML=`<div class="g"><label>Interface</label><input type="text" class="lif"></div><div class="g"><label>IP</label><input type="text" class="lip"></div><button class="btn bd" onclick="_z(this)">√ó</button>`;_i('ll').appendChild(d)}
function _gc(a,b){return b==0?a:_gc(b,a%b)}
function _gn(){let w=[],l=[],rv=_d.querySelector('input[name="ros"]:checked').value;
_q('#lw .r').forEach((r,k)=>{w.push({n:`ISP-${k+1}`,f:r.querySelector('.if').value.trim(),i:r.querySelector('.ip').value.trim(),g:r.querySelector('.gw').value.trim(),b:parseInt(r.querySelector('.bw').value)||1})});
_q('#ll .r').forEach(r=>{l.push({f:r.querySelector('.lif').value.trim(),i:r.querySelector('.lip').value.trim()})});if(!w.length||!l.length)return alert("Data Kurang!");
let bs=w.map(x=>x.b),g=bs[0];for(let i=1;i<bs.length;i++)g=_gc(bs[i],g);let T=0;w.forEach(x=>{x.r=x.b/g;T+=x.r});
_i('st').innerText=`ROS: ${rv.toUpperCase()} | Streams: ${T} | Ratio: ${w.map(x=>x.r).join(':')}`;
let s=`# PCC V4.2 UNIVERSAL (${rv.toUpperCase()}) PROTECTED\n# Created By Muhammad Bagus Pribadi\n/log info "Start PCC V4.2"\n/interface list add name=WAN_LIST\n/interface list add name=LAN_LIST\n/ip firewall address-list\nadd list=LOC address=192.168.0.0/16\nadd list=LOC address=10.0.0.0/8\nadd list=LOC address=172.16.0.0/12\n/ip firewall filter disable [find action=fasttrack-connection]\n/ip dns set servers=8.8.8.8,1.1.1.1 allow-remote-requests=yes\n`;
w.forEach(x=>{s+=`/interface set [find default-name=${x.f}] name="${x.f}"\n/interface list member add interface="${x.f}" list=WAN_LIST\n/ip address add address=${x.i} interface="${x.f}" comment="${x.n}"\n/ip firewall nat add chain=srcnat out-interface="${x.f}" action=masquerade comment="NAT-${x.n}"\nadd chain=input in-interface="${x.f}" action=mark-connection new-connection-mark=${x.n}_conn passthrough=yes\nadd chain=output connection-mark=${x.n}_conn action=mark-routing new-routing-mark=to_${x.n} passthrough=no\n`});
l.forEach(x=>{if(!x.f.toLowerCase().includes('vlan'))s+=`/interface set [find default-name=${x.f}] name="${x.f}"\n`;s+=`/interface list member add interface="${x.f}" list=LAN_LIST\n/ip address add address=${x.i} interface="${x.f}" comment="Local"\n`});
s+=`/ip firewall mangle\nadd chain=prerouting dst-address-type=local action=accept\nadd chain=prerouting dst-address-list=LOC action=accept\n`;let c=0;w.forEach(x=>{for(let k=0;k<x.r;k++){s+=`add chain=prerouting in-interface-list=LAN_LIST dst-address-list=!LOC per-connection-classifier=both-addresses-and-ports:${T}/${c} connection-mark=no-mark action=mark-connection new-connection-mark=${x.n}_conn passthrough=yes\n`;c++}s+=`add chain=prerouting in-interface-list=LAN_LIST connection-mark=${x.n}_conn action=mark-routing new-routing-mark=to_${x.n} passthrough=no\n`});
if(rv==='v7'){s+=`/routing table\n`;w.forEach(x=>{s+=`add name=to_${x.n} fib\n`})}
s+=`/ip route\n`;
w.forEach(x=>{let mp=(rv==='v7')?`routing-table=to_${x.n}`:`routing-mark=to_${x.n}`;s+=`add dst-address=0.0.0.0/0 gateway=${x.g} distance=1 ${mp} check-gateway=ping\n`;w.forEach(b=>{if(x.n!==b.n){let mb=(rv==='v7')?`routing-table=to_${x.n}`:`routing-mark=to_${x.n}`;s+=`add dst-address=0.0.0.0/0 gateway=${b.g} distance=2 ${mb} check-gateway=ping\n`}})});
w.sort((a,b)=>b.b-a.b).forEach((x,i)=>{s+=`add dst-address=0.0.0.0/0 gateway=${x.g} distance=${i+1} check-gateway=ping\n`});
s+=`\n# SECURITY PATCH\n/ip firewall filter\nadd chain=input protocol=udp dst-port=53 in-interface-list=WAN_LIST action=drop\nadd chain=input protocol=tcp dst-port=53 in-interface-list=WAN_LIST action=drop\n`;
_i('ou').value=s}
function _cp(){let e=_i('ou');e.select();navigator.clipboard.writeText(e.value);alert("Copied!")}
</script></body></html>
