<!DOCTYPE html><html lang="id"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Mikrotik PCC Generator</title><style>body{font-family:'Segoe UI',sans-serif;background:#1e1e1e;color:#d4d4d4;padding:20px;margin:0}a{text-decoration:none}.container{max-width:1000px;margin:0 auto;background:#252526;border-radius:8px;overflow:hidden;box-shadow:0 4px 20px rgba(0,0,0,0.6)}.header{padding:20px;text-align:center;background:#1f1f1f;border-bottom:1px solid #333}h2{margin:0 0 5px;color:#4ec9b0}.credit{color:#888;font-size:14px;font-weight:500}
.tabs{display:flex;background:#333;border-bottom:1px solid #444}.tab-btn{flex:1;padding:15px;background:0 0;border:0;color:#aaa;cursor:pointer;font-weight:700;font-size:1rem;transition:.3s}.tab-btn:hover{background:#3e3e42;color:#fff}.tab-btn.active{background:#252526;color:#4ec9b0;border-top:3px solid #4ec9b0}.tab-content{display:none;padding:25px}.tab-content.active{display:block;animation:fadeIn .3s}.dynamic-list{display:flex;flex-direction:column;gap:10px}.list-row{display:flex;gap:10px;background:#2d2d30;padding:15px;border-radius:5px;border:1px solid #3e3e42;align-items:flex-end}.input-group{flex:1}label{display:block;margin-bottom:5px;font-size:.85em;color:#9cdcfe}input{width:100%;padding:8px;background:#3c3c3c;border:1px solid #555;color:#fff;border-radius:3px;box-sizing:border-box}input:focus{border-color:#007acc;outline:0}.btn{padding:8px 15px;border:0;border-radius:4px;cursor:pointer;font-weight:700;color:#fff}.btn-add{background:#4ec9b0;color:#1e1e1e;margin-top:15px;width:100%}.btn-del{background:#f44336;height:35px;width:35px;display:flex;align-items:center;justify-content:center;padding:0}.btn-gen{background:#007acc;width:100%;padding:15px;font-size:1.1em;margin-top:20px}.btn-copy{background:#28a745;width:100%;margin-top:10px}textarea{width:100%;height:450px;background:#1e1e1e;color:#ce9178;border:1px solid #444;padding:15px;font-family:'Consolas',monospace;margin-top:15px;white-space:pre;border-radius:5px}@keyframes fadeIn{from{opacity:0}to{opacity:1}}h3{border-bottom:1px solid #444;padding-bottom:10px;color:#569cd6}.info{font-size:.9em;color:#888;margin-bottom:15px;font-style:italic}
.footer{text-align:center;padding:20px;border-top:1px solid #333;background:#1f1f1f}.donate-btn{background:#faae2b;color:#1e1e1e;padding:10px 20px;border-radius:5px;font-weight:bold;display:inline-flex;align-items:center;gap:8px;transition:.2s}.donate-btn:hover{transform:translateY(-2px);box-shadow:0 4px 10px rgba(250,174,43,.3)}</style></head><body>
<div class="container">
<div class="header"><h2>Mikrotik Multi-WAN Generator</h2><div class="credit">Created By Muhammad Bagus Pribadi</div></div>
<div class="tabs"><button class="tab-btn active" onclick="_t('t1',this)">1. ISP (WAN)</button><button class="tab-btn" onclick="_t('t2',this)">2. LAN (VLAN)</button><button class="tab-btn" onclick="_t('t3',this)">3. Generate</button></div>
<div id="t1" class="tab-content active"><h3>ISP Config</h3><p class="info">Input data ISP & Bandwidth Anda.</p><div id="c1" class="dynamic-list"><div class="list-row"><div class="input-group"><label>Interface</label><input type="text" class="i-if" value="ether1-ISP-A"></div><div class="input-group"><label>IP</label><input type="text" class="i-ip" value="192.168.100.2/24"></div><div class="input-group"><label>Gateway</label><input type="text" class="i-gw" value="192.168.100.1"></div><div class="input-group" style="flex:.5"><label>Mb</label><input type="number" class="i-bw" value="20"></div><button class="btn btn-del" onclick="_d(this)">X</button></div><div class="list-row"><div class="input-group"><label>Interface</label><input type="text" class="i-if" value="ether2-ISP-B"></div><div class="input-group"><label>IP</label><input type="text" class="i-ip" value="192.168.200.2/24"></div><div class="input-group"><label>Gateway</label><input type="text" class="i-gw" value="192.168.200.1"></div><div class="input-group" style="flex:.5"><label>Mb</label><input type="number" class="i-bw" value="30"></div><button class="btn btn-del" onclick="_d(this)">X</button></div></div><button class="btn btn-add" onclick="_a1()">+ Add ISP</button></div>
<div id="t2" class="tab-content"><h3>LAN Config</h3><p class="info">Input Local Network / VLAN.</p><div id="c2" class="dynamic-list"><div class="list-row"><div class="input-group"><label>Interface</label><input type="text" class="l-if" value="ether3-LAN"></div><div class="input-group"><label>IP Gateway</label><input type="text" class="l-ip" value="192.168.2.1/24"></div><button class="btn btn-del" onclick="_d(this)">X</button></div></div><button class="btn btn-add" onclick="_a2()">+ Add LAN</button></div>
<div id="t3" class="tab-content"><h3>Script Result</h3><div id="inf" style="color:#4ec9b0;margin-bottom:10px;font-weight:700"></div><button class="btn btn-gen" onclick="_g()">GENERATE SCRIPT</button><textarea id="out" readonly placeholder="Klik Generate..."></textarea><button class="btn btn-copy" onclick="_c()">Copy Script</button></div>
<div class="footer"><p style="color:#666;font-size:12px;margin-bottom:10px">Support development tool ini:</p><a href="https://saweria.co/SigmaRule" target="_blank" class="donate-btn">üéÅ Dukung Seiklasnya via Saweria Buat Ngopi gan hehehe</a></div>
</div><script>
const D=document;function _t(i,e){D.querySelectorAll('.tab-content').forEach(x=>x.classList.remove('active'));D.querySelectorAll('.tab-btn').forEach(x=>x.classList.remove('active'));D.getElementById(i).classList.add('active');e.classList.add('active')}
function _d(b){if(confirm("Hapus baris?"))b.parentElement.remove()}
function _a1(){let d=D.createElement('div');d.className='list-row';d.innerHTML=`<div class="input-group"><label>Interface</label><input type="text" class="i-if"></div><div class="input-group"><label>IP</label><input type="text" class="i-ip"></div><div class="input-group"><label>Gateway</label><input type="text" class="i-gw"></div><div class="input-group" style="flex:.5"><label>Mb</label><input type="number" class="i-bw" value="10"></div><button class="btn btn-del" onclick="_d(this)">X</button>`;D.getElementById('c1').appendChild(d)}
function _a2(){let d=D.createElement('div');d.className='list-row';d.innerHTML=`<div class="input-group"><label>Interface</label><input type="text" class="l-if"></div><div class="input-group"><label>IP</label><input type="text" class="l-ip"></div><button class="btn btn-del" onclick="_d(this)">X</button>`;D.getElementById('c2').appendChild(d)}
function _gcd(a,b){return b==0?a:_gcd(b,a%b)}
function _g(){let s=`# Generated by Muhammad Bagus Pribadi\n/log info "Start PCC Script"\n\n`,I=[],L=[],q=D.querySelectorAll;q.call(D,'#c1 .list-row').forEach((r,x)=>{I.push({n:`ISP-${x+1}`,f:r.querySelector('.i-if').value.trim(),i:r.querySelector('.i-ip').value.trim(),g:r.querySelector('.i-gw').value.trim(),b:parseInt(r.querySelector('.i-bw').value)||1})});q.call(D,'#c2 .list-row').forEach(r=>{L.push({f:r.querySelector('.l-if').value.trim(),i:r.querySelector('.l-ip').value.trim()})});if(I.length==0||L.length==0){alert("Data belum lengkap!");return}
s+=`# 1. SETUP INTERFACE\n/interface list add name=WAN_LIST\n/interface list add name=LAN_LIST\n`;I.forEach(x=>{s+=`/interface set [find default-name=${x.f}] name="${x.f}"\n/interface list member add interface="${x.f}" list=WAN_LIST\n/ip address add address=${x.i} interface="${x.f}" comment="${x.n}"\n`});L.forEach(x=>{if(!x.f.toLowerCase().includes('vlan'))s+=`/interface set [find default-name=${x.f}] name="${x.f}"\n`;s+=`/interface list member add interface="${x.f}" list=LAN_LIST\n/ip address add address=${x.i} interface="${x.f}" comment="Local"\n`});
s+=`\n# 2. DNS & NAT\n/ip dns set servers=8.8.8.8,8.8.4.4 allow-remote-requests=yes\n/ip firewall nat add chain=srcnat out-interface-list=WAN_LIST action=masquerade\n`;let B=I.map(x=>x.b),G=B[0];for(let i=1;i<B.length;i++)G=_gcd(B[i],G);let T=0;I.forEach(x=>{x.w=x.b/G;T+=x.w});D.getElementById('inf').innerText=`Total PCC Streams: ${T}`;s+=`\n# 3. MANGLE (PCC Loadbalance)\n/ip firewall mangle\n`;I.forEach(x=>{s+=`add chain=prerouting in-interface="${x.f}" connection-mark=no-mark action=mark-connection new-connection-mark=${x.n}_conn passthrough=yes\n`});let c=0;I.forEach(x=>{for(let k=0;k<x.w;k++){s+=`add chain=prerouting in-interface-list=LAN_LIST dst-address-type=!local per-connection-classifier=both-addresses-and-ports:${T}/${c} connection-mark=no-mark action=mark-connection new-connection-mark=${x.n}_conn passthrough=yes\n`;c++}});I.forEach(x=>{s+=`add chain=prerouting in-interface-list=LAN_LIST connection-mark=${x.n}_conn action=mark-routing new-routing-mark=to_${x.n} passthrough=no\nadd chain=output connection-mark=${x.n}_conn action=mark-routing new-routing-mark=to_${x.n} passthrough=no\n`});
s+=`\n# 4. ROUTING & FAILOVER\n/ip route\n`;I.forEach(x=>{s+=`add dst-address=0.0.0.0/0 gateway=${x.g} distance=1 routing-mark=to_${x.n} check-gateway=ping\n`});I.sort((a,b)=>b.b-a.b).forEach((x,i)=>{s+=`add dst-address=0.0.0.0/0 gateway=${x.g} distance=${i+1} check-gateway=ping\n`});D.getElementById('out').value=s}
function _c(){let e=D.getElementById("out");e.select();navigator.clipboard.writeText(e.value);alert("Script berhasil dicopy!")}
</script></body></html>
